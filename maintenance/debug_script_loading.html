<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Script Loading Debug</title>
</head>
<body>
    <h1>Script Loading Debug Test</h1>
    <div id="status">Checking script loading...</div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery with fallback -->
    <script>
        console.log('Starting jQuery load test...');
        
        // Try to load jQuery from CDN first
        var jqueryScript = document.createElement('script');
        jqueryScript.src = 'https://code.jquery.com/jquery-3.6.0.min.js';
        jqueryScript.onload = function() {
            console.log('jQuery loaded from CDN');
            document.getElementById('status').innerHTML += '<br>✅ jQuery loaded from CDN';
            checkDependencies();
        };
        jqueryScript.onerror = function() {
            console.log('jQuery CDN failed, loading Google fallback');
            document.getElementById('status').innerHTML += '<br>❌ jQuery CDN failed, trying Google...';
            
            var localScript = document.createElement('script');
            localScript.src = 'https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js';
            localScript.onload = function() {
                console.log('jQuery loaded from Google CDN fallback');
                document.getElementById('status').innerHTML += '<br>✅ jQuery loaded from Google CDN';
                checkDependencies();
            };
            localScript.onerror = function() {
                console.error('All jQuery sources failed');
                document.getElementById('status').innerHTML += '<br>❌ All jQuery sources failed';
            };
            document.head.appendChild(localScript);
        };
        document.head.appendChild(jqueryScript);
    </script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        function checkDependencies() {
            setTimeout(function() {
                document.getElementById('status').innerHTML += '<br><br>Checking dependencies...';
                
                if (typeof $ !== 'undefined') {
                    document.getElementById('status').innerHTML += '<br>✅ jQuery is available';
                    console.log('jQuery version:', $.fn.jquery);
                } else {
                    document.getElementById('status').innerHTML += '<br>❌ jQuery is NOT available';
                }
                
                if (typeof Chart !== 'undefined') {
                    document.getElementById('status').innerHTML += '<br>✅ Chart.js is available';
                    console.log('Chart.js version:', Chart.version);
                } else {
                    document.getElementById('status').innerHTML += '<br>❌ Chart.js is NOT available';
                }
                
                if (typeof bootstrap !== 'undefined') {
                    document.getElementById('status').innerHTML += '<br>✅ Bootstrap is available';
                } else {
                    document.getElementById('status').innerHTML += '<br>❌ Bootstrap is NOT available';
                }
                
                // Test jQuery functionality
                if (typeof $ !== 'undefined') {
                    try {
                        $('body').append('<div style="color: green;">jQuery test: Successfully created element</div>');
                        document.getElementById('status').innerHTML += '<br>✅ jQuery functionality test passed';
                    } catch (e) {
                        document.getElementById('status').innerHTML += '<br>❌ jQuery functionality test failed: ' + e.message;
                    }
                }
                
            }, 1000);
        }
        
        // Also check Chart.js loading
        var chartScript = document.querySelector('script[src*="chart.js"]');
        if (chartScript) {
            chartScript.onload = function() {
                console.log('Chart.js loaded successfully');
                document.getElementById('status').innerHTML += '<br>✅ Chart.js script loaded';
            };
            chartScript.onerror = function() {
                console.error('Chart.js failed to load');
                document.getElementById('status').innerHTML += '<br>❌ Chart.js script failed to load';
            };
        }
    </script>
</body>
</html>
